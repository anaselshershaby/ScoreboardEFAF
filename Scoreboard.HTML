<!-- display.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Live Score Display</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=College&family=Varsity+Team&display=swap">
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js"></script>
    <style>
        /* Add temporary debug styles */
        body { background-color: #1a1a1a !important; }
        .game-card { background: red !important; }
    </style>
</head>
<body>
    <div class="scoreboard-container" id="scoreboard">
        <!-- Fallback content -->
        Loading scores...
    </div>

    <script>
        // Debugging steps
        console.log("Initializing display dashboard...");

        // 1. Verify Firebase config
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        try {
            const app = firebase.initializeApp(firebaseConfig);
            console.log("Firebase initialized:", app);
        } catch (error) {
            console.error("Firebase initialization failed:", error);
            document.body.innerHTML = `<h1 style="color:red">Firebase Error: ${error.message}</h1>`;
        }

        const db = firebase.database();
        const scoreboardRef = db.ref('scoreboard');

        // 2. Add error listeners
        scoreboardRef.on('value', 
            (snapshot) => {
                console.log("Data received:", snapshot.val());
                updateDisplay(snapshot.val());
            },
            (error) => {
                console.error("Firebase error:", error);
                document.getElementById('scoreboard').innerHTML = 
                    `<h2 style="color:red">Database Error: ${error.message}</h2>`;
            }
        );

        // 3. Simplified initial display
        function createScoreboard() {
            const container = document.getElementById('scoreboard');
            container.innerHTML = ''; // Clear loading message
            
            for (let game = 1; game <= 3; game++) {
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card';
                gameCard.innerHTML = `
                    <h2>Game ${game}</h2>
                    <div class="teams-container">
                        ${createTeamDisplay(game, 1)}
                        <div class="vs">VS</div>
                        ${createTeamDisplay(game, 2)}
                    </div>
                `;
                container.appendChild(gameCard);
            }
        }

        function createTeamDisplay(game, team) {
            return `
                <div class="team-display">
                    <img class="team-logo" alt="Team ${team}">
                    <div class="team-name">Team ${team}</div>
                    <div class="score">0</div>
                </div>
            `;
        }

        // 4. Add error handling for updateDisplay
        function updateDisplay(data) {
            try {
                if (!data) {
                    console.warn("No data received");
                    return;
                }

                // Update background
                if (data.background) {
                    document.body.style.backgroundImage = `url(${data.background})`;
                }

                // Update games
                for (let game = 1; game <= 3; game++) {
                    const gameData = data[`game${game}`] || {};
                    
                    for (let team = 1; team <= 2; team++) {
                        const teamData = gameData[`team${team}`] || {};
                        const teamElement = document.querySelector(
                            `.game-card:nth-child(${game}) .team-display:nth-child(${team})`
                        );

                        if (teamElement) {
                            // Update logo
                            const logo = teamElement.querySelector('.team-logo');
                            if (teamData.logo) logo.src = teamData.logo;
                            
                            // Update name
                            const name = teamElement.querySelector('.team-name');
                            if (teamData.name) name.textContent = teamData.name;
                            
                            // Update score
                            const score = teamElement.querySelector('.score');
                            if (teamData.score) score.textContent = teamData.score;
                        }
                    }
                }
            } catch (error) {
                console.error("Display update error:", error);
            }
        }

        // 5. Initialize with error handling
        document.addEventListener('DOMContentLoaded', () => {
            try {
                createScoreboard();
                console.log("Scoreboard initialized");
            } catch (error) {
                console.error("Initialization error:", error);
                document.body.innerHTML = `<h1 style="color:red">Initialization Error: ${error.message}</h1>`;
            }
        });
    </script>
</body>
</html>
