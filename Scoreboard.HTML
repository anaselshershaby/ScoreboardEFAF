<!-- scoreboard.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Live Scoreboard</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=College&family=Varsity+Team&display=swap">
    <style>
        :root {
            --college-font: 'Varsity Team', 'College', Impact, sans-serif;
            --score-color: #FFD700;
        }

        body {
            background: #000;
            color: white;
            margin: 0;
            padding: 20px;
            transition: background 0.5s ease-in-out;
            background-size: cover;
            background-position: center;
        }

        .scoreboard-container {
            display: flex;
            flex-direction: column;
            gap: 40px;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .game {
            background: #111;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 1000px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 3px solid #444;
            position: relative;
        }

        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            width: 35%;
            justify-content: center;
            overflow: hidden;
        }

        .logo {
            width: 150px;
            height: 150px;
            max-width: 100%;
            object-fit: contain;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.2));
        }

        .name {
            font-family: var(--college-font);
            font-size: 36px;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }

        .score {
            font-family: var(--college-font);
            font-size: 120px;
            margin: 0 30px;
            color: var(--score-color);
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
            transition: all 0.3s ease;
        }

    </style>
</head>
<body>
<a href="index.html" target="_blank" style="color: white; text-decoration: none; font-size: 18px; margin-bottom: 10px; display: inline-block;">
    Back to Dashboard
</a>
    <div class="scoreboard-container">
        <script>
            for (let game = 1; game <= 3; game++) {
                document.write(`
                    <div class="game">
                        <div class="team">
                            <div class="name" id="name1-game${game}">${localStorage.getItem(`name-1-${game}`) || `HOME TEAM ${game}`}</div>
                            <img id="logo1-game${game}" class="logo" src="" alt="Home Team ${game} Logo">
                        </div>
                        <div class="score" id="score1-game${game}">${localStorage.getItem(`score-1-${game}`) || 0}</div>
                        <div class="score" id="score2-game${game}">${localStorage.getItem(`score-2-${game}`) || 0}</div>
                        <div class="team">
                            <div class="name" id="name2-game${game}">${localStorage.getItem(`name-2-${game}`) || `AWAY TEAM ${game}`}</div>
                            <img id="logo2-game${game}" class="logo" src="" alt="Away Team ${game} Logo">
                        </div>
                    </div>
                `);
            }
        </script>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
<script>
  // Firebase Configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBnHWRcCF4P8aneCbpKPWj3picLajwjEJA",
  authDomain: "efaf-scoreborad.firebaseapp.com",
  databaseURL: "https://efaf-scoreborad-default-rtdb.firebaseio.com",
  projectId: "efaf-scoreborad",
  storageBucket: "efaf-scoreborad.firebasestorage.app",
  messagingSenderId: "422493280611",
  appId: "1:422493280611:web:76bff49b2ed92464b2db56",
  measurementId: "G-2P220TFGL6"
};

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  function uploadTeamLogo(game, team) {
      const file = document.getElementById(`logo${team}-upload-game${game}`).files[0];
      if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
              db.ref(`games/game${game}/team${team}/logo`).set(e.target.result);
          };
          reader.readAsDataURL(file);
      }
  }

  function updateTeamName(game, team, name) {
      db.ref(`games/game${game}/team${team}/name`).set(name);
  }

  function updateScore(game, team, score) {
      db.ref(`games/game${game}/team${team}/score`).set(score);
  }

  function adjustScore(game, team, points) {
      let scoreRef = db.ref(`games/game${game}/team${team}/score`);
      scoreRef.once("value").then(snapshot => {
          let newScore = (snapshot.val() || 0) + points;
          if (newScore < 0) newScore = 0;
          scoreRef.set(newScore);
      });
  }

  function resetScore(game, team) {
      db.ref(`games/game${game}/team${team}/score`).set(0);
  }

  function uploadBackground() {
      const file = document.getElementById('backgroundUpload').files[0];
      if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
              db.ref('background-image').set(e.target.result);
          };
          reader.readAsDataURL(file);
      }
  }

  function clearBackground() {
      db.ref('background-image').remove();
  }

  function syncScoreboard() {
      for (let game = 1; game <= 3; game++) {
          for (let team = 1; team <= 2; team++) {
              let scoreRef = db.ref(`games/game${game}/team${team}/score`);
              let nameRef = db.ref(`games/game${game}/team${team}/name`);
              let logoRef = db.ref(`games/game${game}/team${team}/logo`);

              scoreRef.on("value", snapshot => {
                  document.getElementById(`score${team}-game${game}`).value = snapshot.val() || 0;
              });

              nameRef.on("value", snapshot => {
                  document.getElementById(`name${team}-game${game}`).value = snapshot.val() || `Team ${team}`;
              });

              logoRef.on("value", snapshot => {
                  if (snapshot.val()) {
                      document.getElementById(`logo${team}-game${game}`).src = snapshot.val();
                  }
              });
          }
      }

      let backgroundRef = db.ref("background-image");
      backgroundRef.on("value", snapshot => {
          if (snapshot.val()) {
              document.body.style.backgroundImage = `url(${snapshot.val()})`;
          } else {
              document.body.style.backgroundImage = '';
          }
      });
  }

  window.onload = syncScoreboard;
</script>
</body>
</html>
